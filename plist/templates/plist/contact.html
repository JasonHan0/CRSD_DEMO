{% extends './base.html' %}
{% block main %}
{% load static %}
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
        var audio;
        var playlist;
        var tracks;
        var current;

        init();
        function init(){
            current = 0;
            audio = $('audio');
            playlist = $('#playlist');
            tracks = playlist.find('li a');
            len = tracks.length - 1;
            audio[0].volume = .10;
            playlist.find('a').click(function(e){
                e.preventDefault();
                link = $(this);
                current = link.parent().index();
                run(link, audio[0]);
            });
            audio[0].addEventListener('ended',function(e){
                current++;
                if(current == len){
                    current = 0;
                    link = playlist.find('a')[0];
                }else{
                    link = playlist.find('a')[current];
                }
                run($(link),audio[0]);
            });
        }
        function run(link, player){
                player.src = link.attr('href');
                par = link.parent();
                par.addClass('active').siblings().removeClass('active');
                audio[0].load();
                audio[0].play();
        }
    </script>

    <!-- ##### Breadcumb Area Start ##### -->
    <section class="breadcumb-area bg-img bg-overlay" style="background-image: url({% static 'plist/img/bg-img/breadcumb3.jpg' %});">
        <div class="bradcumbContent">
            <p>Make Your Own Playlist</p>
            <h2>Song Detail</h2>
        </div>
    </section>

    <!-- ##### Breadcumb Area End ##### -->
    <section>
        <audio id="audio" preload="auto" tabindex="0" controls="" type="audio/mpeg">
        <source type="audio/mp3" src="/static/plist/audio/Someday You Know.mp3">
        Sorry, your browser does not support HTML5 audio.
        </audio>
        <ul id="playlist">
            <li class="active"><a href="http://localhost:8000/static/plist/audio/Someday You Know.mp3">Someday You Know</a></li>
            <li><a href="http://localhost:8000/static/plist/audio/Teddy Bear Rises.mp3">Teddy Bear Rises</a></li>
            <li><a href="http://localhost:8000/static/plist/audio/test.mp3">test</a></li>
            <li><a href="http://localhost:8000/static/plist/audio/Hello.mp3">Hello</a></li>

        </ul>
    </section>

{% endblock %}